"use strict";(self["webpackChunkcoursebench_frontend"]=self["webpackChunkcoursebench_frontend"]||[]).push([[936],{8936:(s,t,e)=>{e.r(t),e.d(t,{default:()=>Z});var i=e(4741),a=e(3816),r=e(6930),o=e(3240),d=e(9088),n=e(7935),c=e(5439),l=e(62),u=function(){var s=this,t=s._self._c;return t("div",[s.$vuetify.breakpoint.xsOnly?t("div",[t("div",{staticClass:"main-card",staticStyle:{"min-width":"300px"}},[t("div",{staticClass:"d-flex justify-center"},[s.status.inputFinished?s.status.loading?t("div",{staticClass:"loading-container-mobile d-flex justify-center"},[t("div",{staticClass:"d-flex justify-center flex-column"},[t(n.Z,{attrs:{indeterminate:"",size:"128",width:"8",color:"primary"}})],1)]):""==s.status.errorMessage?t(d.Z,{attrs:{size:"160",color:"success"}},[s._v(" "+s._s(s.statics.icons.mdiCheckboxMarkedCircleOutline)+" ")]):t(d.Z,{attrs:{size:"160",color:"error"}},[s._v(" "+s._s(s.statics.icons.mdiCloseCircleOutline)+" ")]):t("div",{staticClass:"loading-container-mobile d-flex justify-center"},[t("div",{staticClass:"d-flex justify-center flex-column"},[t("div",{staticClass:"d-flex justify-center flex-column"},[t(d.Z,{attrs:{size:"128"}},[s._v(" "+s._s(s.statics.icons.mdiKeyVariant)+" ")])],1)])])],1),t("div",[s.status.inputFinished?s.status.loading?t("div",[t("div",{staticClass:"text-h4 pt-6 text-center"},[s._v("正在加载中...")]),t("div",{staticClass:"pt-6 word-wrap text-center"},[s._v(" 您的密码即将完成重置，请稍等。 ")])]):""==s.status.errorMessage?t("div",[t("div",{staticClass:"text-h4 pt-6 text-center"},[s._v("密码重置成功!")]),t("div",{staticClass:"pt-6 word-wrap text-center"},[s._v(" 您的密码已经重置成功，感谢您使用本系统。 ")])]):t("div",[t("div",{staticClass:"text-h4 pt-6 text-center"},[s._v("发生错误!")]),t("div",{staticClass:"pt-6 word-wrap text-center"},[s._v(" "+s._s(s.status.errorMessage)+"，请稍后重试。 ")])]):t("div",[s._m(0),t(o.Z,{on:{submit:function(t){t.preventDefault(),s.doResetPasswordActive()}},model:{value:s.status.passwordFormValid,callback:function(t){s.$set(s.status,"passwordFormValid",t)},expression:"status.passwordFormValid"}},[t(l.Z,{ref:"passwordTextField",attrs:{type:s.status.passwordVisible?"text":"password",rules:[s.formRules.required,s.formRules.password],"append-icon":s.status.passwordVisible?s.statics.icons.mdiEyeOff:s.statics.icons.mdiEye},on:{"click:append":function(t){s.status.passwordVisible=!s.status.passwordVisible}},model:{value:s.userData.password,callback:function(t){s.$set(s.userData,"password",t)},expression:"userData.password"}})],1)],1),s.status.loading?s._e():t("div",{staticClass:"d-flex justify-center pt-16"},[s.status.inputFinished?t(i.Z,{attrs:{width:"90px",elevation:"1",color:"primary"},on:{click:function(t){return s.$router.push("/")}}},[s._v(" 返回首页 ")]):t(i.Z,{attrs:{width:"90px",elevation:"1",color:"primary"},on:{click:function(t){return s.doResetPasswordActive()}}},[s._v(" 下一步 ")])],1)])])]):t("div",{style:{background:s.$vuetify.theme.isDark?"":"#f9f9f9","min-height":"100%"}},[t(c.Z,{attrs:{color:s.$vuetify.theme.isDark?s.statics.backgroundDark:s.statics.backgroundLight,height:s.$vuetify.breakpoint.xsOnly?91:"40vh"}}),t(r.Z5,[t("div",{staticClass:"main-card"},[t(a.Z,{staticClass:"d-flex justify-space-between flex-column",attrs:{width:"600px",height:"400px",elevation:"2"}},[t("div",{staticClass:"px-16 pt-16 d-flex"},[t("div",{staticStyle:{height:"100%"}},[s.status.inputFinished?s.status.loading?t("div",{staticClass:"loading-container d-flex justify-center"},[t("div",{staticClass:"d-flex justify-center flex-column"},[t(n.Z,{attrs:{indeterminate:"",size:"100",width:"8",color:"primary"}})],1)]):""==s.status.errorMessage?t(d.Z,{attrs:{size:"128",color:"success"}},[s._v(" "+s._s(s.statics.icons.mdiCheckboxMarkedCircleOutline)+" ")]):t(d.Z,{attrs:{size:"128",color:"error"}},[s._v(" "+s._s(s.statics.icons.mdiCloseCircleOutline)+" ")]):t("div",{staticClass:"loading-container d-flex justify-center"},[t("div",{staticClass:"d-flex justify-center flex-column"},[t(d.Z,{attrs:{size:"100"}},[s._v(" "+s._s(s.statics.icons.mdiKeyVariant)+" ")])],1)])],1),t("div",{staticClass:"pl-6 d-flex justify-space-between flex-column",staticStyle:{"max-width":"344px",height:"100%",width:"100%"}},[s.status.inputFinished?s.status.loading?t("div",[t("div",{staticClass:"text-h4 pt-6"},[s._v("正在加载中...")]),t("div",{staticClass:"pt-6 word-wrap"},[s._v(" 您的密码即将完成重置，请稍等。 ")])]):""==s.status.errorMessage?t("div",[t("div",{staticClass:"text-h4 pt-6"},[s._v("密码重置成功!")]),t("div",{staticClass:"pt-6 word-wrap"},[s._v(" 您的密码已经重置成功，感谢您使用本系统。 ")])]):t("div",[t("div",{staticClass:"text-h4 pt-6"},[s._v("发生错误!")]),t("div",{staticClass:"pt-6 word-wrap"},[s._v(" "+s._s(s.status.errorMessage)+" ")])]):t("div",[t("div",{staticClass:"text-h5 pt-6"},[s._v("重置密码")]),t(o.Z,{on:{submit:function(t){t.preventDefault(),s.doResetPasswordActive()}},model:{value:s.status.passwordFormValid,callback:function(t){s.$set(s.status,"passwordFormValid",t)},expression:"status.passwordFormValid"}},[t(l.Z,{ref:"passwordTextField",staticClass:"mr-4",attrs:{type:s.status.passwordVisible?"text":"password",rules:[s.formRules.required,s.formRules.password],"append-icon":s.status.passwordVisible?s.statics.icons.mdiEyeOff:s.statics.icons.mdiEye},on:{"click:append":function(t){s.status.passwordVisible=!s.status.passwordVisible}},model:{value:s.userData.password,callback:function(t){s.$set(s.userData,"password",t)},expression:"userData.password"}})],1)],1)])]),t("div",{staticClass:"px-16 pb-16 d-flex justify-end"},[t("div",{staticClass:"d-flex justify-end pb-6 pr-4"},[s.status.inputFinished?t(i.Z,{attrs:{width:"90px",elevation:"1",color:"primary"},on:{click:function(t){return s.$router.push("/")}}},[s._v(" 返回首页 ")]):t(i.Z,{attrs:{width:"90px",elevation:"1",color:"primary"},on:{click:function(t){return s.doResetPasswordActive()}}},[s._v(" 下一步 ")])],1)])])],1)])],1)])},p=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"text-h5 pt-6 d-sm-block d-flex justify-center"},[t("div",[s._v("重置密码")])])}],v=e(5317),f=e(2251),w=e(144),m=e(6833),x=e(7095);const h=()=>{const s=(0,f.y)(),t={backgroundLight:"#aaaaaa",backgroundDark:"grey darken-3",icons:{mdiCheckboxMarkedCircleOutline:v.F9P,mdiCloseCircleOutline:v.DNZ,mdiKeyVariant:v.YA5,mdiEye:v.rgx,mdiEyeOff:v.DqW}},e=(0,w.qj)({loading:!1,errorMessage:"",passwordFormValid:!1,passwordVisible:!1,inputFinished:!1}),i=(0,w.qj)({password:""}),a=(0,x.Z)("/user/reset_password_active",{onMutate:()=>{e.loading=!0,e.errorMessage=""},onSuccess:()=>{e.errorMessage=""},onError:s=>{(0,m.eE)(s.response)?e.errorMessage="网络连接失败，请稍后重试。":(0,m.q6)(s.response.data.msg)?e.errorMessage=s.response.data.msg+"，请稍后重试。":e.errorMessage="服务器发生错误，请稍后重试。"},onSettled:()=>{e.loading=!1}}),r=()=>{e.passwordFormValid&&""!==i.password&&(e.inputFinished=!0,a.mutate({id:new Number(s.query.id),code:s.query.code,password:i.password}))};return(0,w.bv)((()=>{s.query.id&&s.query.code||(e.loading=!1,e.inputFinished=!0,e.errorMessage="激活链接无效，请检查链接是否正确。")})),{statics:t,status:e,userData:i,doResetPasswordActive:r}};var y=e(7434),C=e(969);const g={setup(){const{formRules:s}=(0,y.Z)(),{statics:t,status:e,userData:i,doResetPasswordActive:a}=h();return{statics:t,status:e,userData:i,doResetPasswordActive:a,formRules:s}},mounted(){(0,C.Z)((()=>{this.$refs.passwordTextField.focus()}))}},_=g;var b=e(1001),k=(0,b.Z)(_,u,p,!1,null,"072e75b6",null);const Z=k.exports}}]);